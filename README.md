# The Majong Like Test [Русский]
[Readme in english](./README_ENGLISH.md)

## Версия Unity 2022.3.46f1

Игра представляет собой вариант пасьянса Маджонг. Игроку дано поле, заполненное прямоугольными плитками в в несколько слоев. Цель - очистить поле, собирая парные плитки с одинаковыми изображениями, при условии, что выбранные плитки не ограничены справа, слева и сверху.  
[Геймплей](./gameplay.gif)

## В данном проекте представлены следующие фичи:

### Мини-редактор уровней
Мини-редактор уровней, позволяющий создать кастомные карты для заполнения поля (ScriptableObject MapConfig). Можно выбрать количество слоев для заполнения, их ширину и длину, а также выбрать слоты, в которые можно добавлять плитки.  
[редактор уровня](./inspector.png)

### Описание плитки (тайла)
Плитка(тайл) представляет собой прямоугольник на игровом поле имеющий несколько состояний, в некоторых из которых он доступен для выделения. В случае выделения двух доступных плиток они удаляются с карты. В случае несовпадения выделения двух плиток они проиграют анимацию отмены.

## Менеджер плиток или тайлов (TileManager)
Менеджер плиток или тайлов (TileManager) регулирует заполнением поля так, чтобы хотя бы один вариант прохождения был реализуем.  

## Логика заполнения поля
Логика заполнения поля. Сначала менеджер обрабатывает текущую карту из конфига и находит все крайние доступные слоты, в которых могут быть выделены плитки. В дальнейшем он располагает парные плитки в случайно выбранные доступные слои. Затем установленные плитки удаляются из списка на обработку и снова повторяется поиск доступных плиток. Итерации повторяются до полной обработки всех слотов.

## Менеджер автопрохождения уровня
Менеджер автопрохождения уровня блокирует управление игрока и удаляет все доступные плитки так же, как их выделял бы игрок, гарантируя прохождение уровня.  
[авторешение уровня](./solve_level.gif)

Этот менеджер использует два логических подхода. Сперва он обращается к списку из объектов AutolevelStep, которые записываются в TileManager во время заполнения карты, и старается идти по списку удаляемых плиток. В каком-то случае, если плитки из списка не являются доступными, подключается вспомогательная логика. Менеджер ищет любые парные плитки на поле, доступные для выделения. В случае, если у нас в настройках карты указано, что требуется собрать более 2 пар одного вида, может возникнуть ситуация, когда игрок может привести игру к невыполнимому состоянию, но при этом оставить какую-то часть плиток доступной для сбора. В таком случае, менеджер, запущенные не с самого старта уровня, может застрять, что потребует пересборки уровня.

## Используемый стек технологий
Используется следующий стек технологий:
- Zenject – для DI-ассоциированного облегчения зависимостей между объектами  
- UniRX – для оперативного реагирования объектов на изменения  
- UniTask – для упрощения и читабельности в коде асинхронных операций ожидания  
- DOTween – для анимации геймобжектов  

## Ссылки
- [Ссылка на проект на Itchi.io](https://itch.io/your-project)  
